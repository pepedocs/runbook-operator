apiVersion: runbook.beastduck.com/v1
kind: RunBook
metadata:
  namespace: ro-tests
  name: config-error
spec:
  serviceAccountName: runbook-example
  steps:
    - name: gather
      description: Gather logs from the mysql pod.
      image: bitnami/kubectl
      command: ["sh"]
      args:
        - -c
        - "kubectl logs mysql > /logs/mysql.logs"
      volumeMounts:
      - mountPath: /logs
        name: logs
    - name: finalize
      description: |
        Ensure that logs are saved in the logs directory.
      image: bitnami/kubectl
      command: ["sh"]
      args:
        - "-c"
        - "cat /logs/mysql.logs"
      volumeMounts:
      - mountPath: /logs
        name: logs
  volumes:
  - name: logs
    persistentVolumeClaim:
      claimName: logs-pvc

